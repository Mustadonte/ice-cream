{"version":3,"sources":["js/shop.js"],"names":["food_lines_number","food_lines_vis_number","all_food_prices","all_food_type","all_food_quantity","pokupki_block","document","getElementById","food_selectors","getElementsByClassName","food_quantities","food_closes","food_amounts","add_button1","price_str","Intl","NumberFormat","style","currency","minimumFractionDigits","fill_food_line","food_line_num","food_type_cur","querySelector","selectedIndex","textContent","format","food_quantity_cur","value","total_food_amount","i","changeOption","event","getAttribute","delOption","preventDefault","del_item","remove","addOption","pokupki_list","elem1","divLast1","cloneNode","before","setAttribute","elem2","elem4","elem6","push","addEventListener","length"],"mappings":"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","file":"shop.fd69ec0a.js","sourceRoot":"../src","sourcesContent":["var food_lines_number = 1;\nvar food_lines_vis_number = 1;\n var all_food_prices = [1.45, 6.50, 12.30, 2.45, 6.65, 7.15, 2.35, 3.80, 4.67];\n var all_food_type = [];\n var all_food_quantity = [];\n\n\n var pokupki_block = document.getElementById('pokupki1');\n \n var food_selectors = pokupki_block.getElementsByClassName('food-selector');\n var food_quantities = pokupki_block.getElementsByClassName('food-quantity');\n var food_closes = pokupki_block.getElementsByClassName('food-close');\n\n var food_amounts = pokupki_block.getElementsByClassName('food-amount');\nvar add_button1 = document.getElementById('add-button');\n \nvar price_str = new Intl.NumberFormat(\"us-US\",\n                        { style: \"currency\", currency: \"USD\",\n                          minimumFractionDigits: 2 });\n\n\n\n function fill_food_line(food_line_num) {\n    var price1, sum1;\n\n\n\n    var food_type_cur = pokupki_block.querySelector('.food-selector[food-line=\"' + food_line_num + '\"]');\n    all_food_type[food_line_num-1] = food_type_cur.selectedIndex;\n         \n    var food_price_cur = pokupki_block.querySelector('.food-price[food-line=\"' + food_line_num + '\"]');\n    food_price_cur.textContent = price_str.format(all_food_prices[food_type_cur.selectedIndex]);\n     \n    var food_quantity_cur = pokupki_block.querySelector('.food-quantity[food-line=\"' + food_line_num + '\"]');\n    all_food_quantity[food_line_num-1] = food_quantity_cur.value;\n     \n    var food_amount_cur = pokupki_block.querySelector('.food-amount[food-line=\"' + food_line_num + '\"]');\n     \n    food_amount_cur.textContent = price_str.format(all_food_prices[food_type_cur.selectedIndex] * all_food_quantity[food_line_num-1]);\n\n    var total_food_amount = 0.0;\n\n    for(i=0; i<food_lines_number; i++) {\n        total_food_amount += all_food_prices[all_food_type[i]] * all_food_quantity[i];\n    }\n   \n    var total_food_amount_div = document.querySelector('.food-total-amount');\n    total_food_amount_div.textContent = price_str.format(total_food_amount);\n }\n\n\nfunction changeOption(event) {\n     fill_food_line(this.getAttribute('food-line'));\n }\n\nfunction delOption(event) {\n\n    \n    event.preventDefault();\n    if (food_lines_vis_number > 1) {\n        food_lines_vis_number--;\n        var del_item = pokupki_block.querySelector('.products-to-choose-in[food-line=\"' + this.getAttribute('food-line') + '\"]');\n        all_food_quantity[this.getAttribute('food-line') - 1] = 0;\n        del_item.remove();\n\n        var total_food_amount = 0.0;\n\n        for (i = 0; i < food_lines_number; i++) {\n            total_food_amount += all_food_prices[all_food_type[i]] * all_food_quantity[i];\n        }\n   \n        var total_food_amount_div = document.querySelector('.food-total-amount');\n        total_food_amount_div.textContent = price_str.format(total_food_amount);\n    } \n }\n\n\n function addOption(event){\n    var pokupki_list = document.getElementById('add-button-div');\n    var elem1 = document.getElementById('food_line_template');\n\n        \n    event.preventDefault();\n    \n     food_lines_number++;\n     food_lines_vis_number++; \n  \n    let divLast1 = elem1.cloneNode(true);\n    pokupki_list.before(divLast1); \n    \n    divLast1.setAttribute(\"food-line\", food_lines_number);\n     \n    var elem2 = divLast1.querySelector('.food-selector');\n     elem2.setAttribute(\"food-line\", food_lines_number);\n          \n    var elem3 = divLast1.querySelector('.food-price');\n    elem3.setAttribute(\"food-line\", food_lines_number);\n\n    var elem4 = divLast1.querySelector('.food-quantity');\n    elem4.setAttribute(\"food-line\", food_lines_number);\n\n    var elem5 = divLast1.querySelector('.food-amount');\n    elem5.setAttribute(\"food-line\", food_lines_number);\n\n    var elem6 = divLast1.querySelector('.food-close');\n    elem6.setAttribute(\"food-line\", food_lines_number);\n\n\n    elem2.selectedIndex = 0;\n    elem4.value = 0;\n    \n    all_food_type.push(0);\n    all_food_quantity.push(0);\n     \n    fill_food_line(food_lines_number);\n\n    elem2.addEventListener(\"change\", changeOption);\n    elem4.addEventListener(\"change\", changeOption);\n    elem6.addEventListener(\"click\", delOption);\n }\n \n all_food_type.push(0);\n all_food_quantity.push(0);\n \n food_selectors[0].selectedIndex = 0;\n food_quantities[0].value = 0;\n\n fill_food_line(1);\n\n for(i=0; i<food_selectors.length; i++) {\n    food_selectors[i].addEventListener(\"change\", changeOption);\n }\n\n for(i=0; i<food_quantities.length; i++) {\n    food_quantities[i].addEventListener(\"change\", changeOption);\n }\n\n  for(i=0; i<food_closes.length; i++) {\n    food_closes[i].addEventListener(\"click\", delOption);\n }\n\n add_button1.addEventListener(\"click\", addOption);"]}